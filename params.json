{"note":"Don't delete this file! It's used internally to help with page regeneration.","google":"UA-33281153-1","name":"Storage","body":"### Persist all the things! Wheee!\r\n\r\nIn attempting to keep things [DRY](http://en.wikipedia.org/wiki/Don't_repeat_yourself), EDStorage was created to address the fair amount of boilerplate that often gets created to deal with writing data to disk within iOS applications in a performant manner. Disk I/O within iOS is synchronous and so much of this boilerplate is often written to improve performance by moving I/O to a background thread. EDStorage accomplishes this by transforming each write instance into a `NSOperation` which is managed by a single `NSOperationQueue`. All of this is done in the background while providing high-level methods to the user via categories. \r\n\r\n**EDStorage strives to provide three things:**\r\n- An abstract interface based on categories that makes persisting data to disk simple.\r\n- A highly generic management interface that makes extending EDStorage equally simple.\r\n- Speed and safety.\r\n\r\n## Basic Use\r\nThe easiest way to get going with EDStorage is to take a look at the included example application. The XCode project file can be found in `example > storage.xcodeproj`.\r\n\r\nIn order to include EDStorage in your project, you'll want to add the entirety of the `storage` directory to your project minus the example project. EDStorage is built on top of foundation libraries and so no additional frameworks are needed. To bring in all of the included storage categories, simply:\r\n\r\n```objective-c\r\n#import \"EDStorage.h\"\r\n```\r\n\r\nEach category has a slightly different interface depending on the needs of a specific class, but to use a common example, let's look at how to persist a UIImage to the application cache directory:\r\n\r\n```objective-c\r\n- (void)doSomething\r\n{\r\n    UIImage *image = [UIImage imageNamed:@\"keyboardCat.png\"];\r\n    \r\n    [image persistToCache:^(NSURL *url, NSUInteger size) {\r\n        NSLog(@\"FTW!: %@ | %d bytes\", url, size);\r\n    } failure:^(NSError *error) {\r\n        NSLog(@\"UH OH: %@\", error);\r\n    }];\r\n}\r\n```\r\n\r\nPersisting to the temporary and documents application directories is equaly simple:\r\n\r\n```objective-c\r\n[image persistToTemp:^(NSURL *url, NSUInteger size) {\r\n    NSLog(@\"FTW!: %@ | %d bytes\", url, size);\r\n} failure:^(NSError *error) {\r\n    NSLog(@\"UH OH: %@\", error);\r\n}];\r\n```\r\n\r\n```objective-c\r\n[image persistToDocuments:^(NSURL *url, NSUInteger size) {\r\n    NSLog(@\"FTW!: %@ | %d bytes\", url, size);\r\n} failure:^(NSError *error) {\r\n    NSLog(@\"UH OH: %@\", error);\r\n}];\r\n```\r\n\r\n## Implementing A Storage Category\r\n`EDStorageManager` provides a single block method for interfacing with categories:\r\n\r\n```objective-c\r\n- (void)persistData:(id)data withExtension:(NSString *)ext toLocation:(Location)location success:(void (^)(NSURL *url, NSUInteger size))success failure:(void (^)(NSError *error))failure;\r\n```\r\n\r\nCategories simply abstract the process of calling this method on `EDStorageManager` by handling conversion of the class instance into a NSData object. For example, the storage category for UIImage simply passes self into NSData by calling `UIImageJPEGRepresentation()`. \r\n\r\n**If you create a category that you find useful, please let me know! Pull requests are welcome.**\r\n\r\n---\r\n\r\n## Locations\r\n```objective-c\r\nEDStorageDirectoryCache\r\nEDStorageDirectoryTemp\r\nEDStorageDirectoryDocuments\r\n```\r\n\r\n## NSData+Storage Methods\r\n```objective-c\r\n- (void)persistToCacheWithExtension:(NSString *)extension success:(void (^)(NSURL *url, NSUInteger size))success failure:(void (^)(NSError *error))failure;\r\n- (void)persistToTempWithExtension:(NSString *)extension success:(void (^)(NSURL *url, NSUInteger size))success failure:(void (^)(NSError *error))failure;\r\n- (void)persistToDocumentsWithExtension:(NSString *)extension success:(void (^)(NSURL *url, NSUInteger size))success failure:(void (^)(NSError *error))failure;\r\n```\r\n\r\n## UIImage+Storage Methods\r\n```objective-c\r\n- (void)persistToCache:(void (^)(NSURL *url, NSUInteger size))success failure:(void (^)(NSError *error))failure;\r\n- (void)persistToTemp:(void (^)(NSURL *url, NSUInteger size))success failure:(void (^)(NSError *error))failure;\r\n- (void)persistToDocuments:(void (^)(NSURL *url, NSUInteger size))success failure:(void (^)(NSError *error))failure;\r\n```\r\n\r\n---\r\n\r\n## iOS Support\r\nEDStorage is tested on iOS 5 and up. Older versions of iOS may work but are not currently supported.\r\n\r\n## ARC\r\nIf you are including EDStorage in a project that uses [Automatic Reference Counting (ARC)](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html), you will need to set the `-fno-objc-arc` compiler flag on all of the EDStorage source files. To do this in Xcode, go to your active target and select the \"Build Phases\" tab. Now select all EDStorage source files, press Enter, insert `-fno-objc-arc` and then \"Done\" to disable ARC for EDStorage.\r\n","tagline":"An iOS library for fast, easy, and safe threaded disk I/O."}